<div class="header-wrapper" [class.hide-top-bar]="hideTopBar">
  <!-- Top Bar -->
  <div class="top-bar">
    <div class="container">
      <div class="left">
        <span class="offer">Welcome to Our store Shopfinity</span>
        <a
          href="https://wa.me/1234567890"
          target="_blank"
          rel="noopener noreferrer"
          class="offer whatsapp-link"
        >
          <ion-icon name="logo-whatsapp" class="logo-whatsapp"></ion-icon>
          Call us: 123-456-7890
        </a>
      </div>

      <div class="right">
        @for (link of topBarLinks; track $index) {
        <a
          [routerLink]="link.path"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
          >{{ link.label }}</a
        >
        }
      </div>
    </div>
  </div>

  <!-- Main Header -->
  <header class="app-header">
    <div class="container">
      <div class="logo">
        <span class="text">Shop<span class="highlight">finity</span></span>
      </div>

      <nav class="nav" [class.open]="menuOpen">
        @for (link of mainNavLinks; track $index) {
        <a
          [routerLink]="link.path"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
          (click)="closeMenu()"
        >
          <ion-icon [name]="link.icon"></ion-icon>
          <span>{{ link.label }}</span>
        </a>
        }
        <a (click)="toggleMenu()" class="cart-mobile-menu">
          <ion-icon name="cart-outline"></ion-icon>
          <span>Cart</span>
        </a>
      </nav>

      <div class="search-bar">
        <input type="text" placeholder="Search products..." />
        <button aria-label="Search">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="search-icon"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <circle cx="11" cy="11" r="8" />
            <line x1="21" y1="21" x2="16.65" y2="16.65" />
          </svg>
        </button>
      </div>

      <div class="right-section">
        <a (click)="toggleMenu()" class="cart-btn">
          <ion-icon name="cart-outline"></ion-icon>
          <span class="cart-count">3</span>
        </a>

        <!-- <button class="menu-toggle" (click)="toggleMenu()" aria-label="Toggle menu">
          <span class="bar top" [class.open]="menuOpen"></span>
          <span class="bar middle" [class.open]="menuOpen"></span>
          <span class="bar bottom" [class.open]="menuOpen"></span>
        </button> -->
      </div>
    </div>
    @if (menuOpen) {
    <div class="cart-panel" [class.open]="menuOpen">
      <div class="cart-header">
        <h3>Shopping Cart</h3>
        <button class="close-btn" (click)="closeMenu()">
          <ion-icon name="close-outline"></ion-icon>
        </button>
      </div>
      <app-shopping-cart class="cart-content"></app-shopping-cart>

      <!-- Footer with “View Cart” button -->
      <div class="cart-footer">
        <button class="view-btn" routerLink="/cart" routerLinkActive="active" (click)="closeMenu()">
          View Cart
        </button>
        <button class="cart-btn" routerLink="/cart" routerLinkActive="active" (click)="closeMenu()">
          Checkout
        </button>
      </div>
    </div>

    <div class="backdrop" (click)="closeMenu()"></div>
    }
  </header>
</div>
